<!DOCTYPE html>
{% load static %}
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SXD Tube</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<style>
    /* Navbar */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #333;
    padding: 10px;
    position: fixed;
    width: 100%;
    top: 0;
    left: 0;
    z-index: 100;
}

.navbar .logo img {
    height: 50px;
    width: 50px;
    margin-right: 10px;
}

.navbar .home a,
.navbar .menu a,
.navbar .user-btn {
    color: white;
    text-decoration: none;
    margin: 0 15px;
    font-size: 16px;
}

.navbar .menu ul {
    display: flex;
    list-style: none;
    padding: 0;
}

.navbar .user-interface {
    display: flex;
    align-items: center;
}

.navbar .auth-buttons a {
    margin-left: 10px;
    padding: 10px;
    background-color: #6A0572;
    color: white;
    border-radius: 5px;
    text-decoration: none;
}

.navbar .user-btn {
    background-color: #6A0572;
    color: white;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
}

.navbar .dropdown {
    display: none;
    position: absolute;
    top: 50px;
    right: 0;
    background-color: white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border-radius: 5px;
    width: 200px;
}

.navbar .dropdown.active {
    display: block;
}

.navbar .dropdown a,
.navbar .dropdown .logout-btn {
    padding: 10px;
    text-decoration: none;
    color: black;
    display: block;
}

.navbar .dropdown .logout-btn {
    background-color: #6A0572;
    color: white;
    border: none;
    cursor: pointer;
}

.container-video-katta {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
}

.container-video-katta video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.video-info {
    position: absolute;
    bottom: 20px;
    left: 20px;
    color: white;
    background-color: rgba(0, 0, 0, 0.6);
    padding: 10px;
    border-radius: 5px;
}

.video-title h3 {
    margin: 0;
    font-size: 24px;
    font-weight: bold;
}

.play-now-button-container {
    position: absolute;
    bottom: 50px;
    right: 50px;
    z-index: 10;
}

.play-now-button {
    padding: 15px 30px;
    background-color: #6A0572;
    color: white;
    border-radius: 50px;
    cursor: pointer;
}

.video-modal {
    display: none;
    justify-content: center;
    align-items: center;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
}

.video-modal video {
    max-width: 90%;
    max-height: 90%;
}

.close-modal {
    position: absolute;
    top: 20px;
    right: 20px;
    background-color: red;
    color: white;
    font-size: 30px;
    padding: 10px;
    cursor: pointer;
}

/* Responsivlik */
@media (max-width: 768px) {
    .navbar .menu ul {
        flex-direction: column;
        align-items: center;
    }

    .navbar .menu a {
        margin: 10px 0;
    }
}

</style>
<body>
<!-- Navbar -->
<nav class="navbar">
    <div class="logo">
        <img src="https://t4.ftcdn.net/jpg/04/67/15/09/360_F_467150902_zUs6Dvp9wJLGOoQRMOqGBtXaqXAJOFTO.jpg"
             alt="SXD Logo">
        <span>SXD Tube</span>
    </div>
    <div class="home">
        <a href="{% url 'index' %}">Home</a>
    </div>
    <div class="menu">
        <ul>
            <li><a href="{% url 'multfilimlar' %}">Multfilm</a></li>
            <li><a href="#">Anime</a></li>
            <li><a href="{% url 'kinolar' %}">Kinolar</a></li>
            <li><a href="{% url 'seriallar' %}">Seriallar</a></li>
        </ul>
    </div>
    <div class="search-call">
        <input type="text" placeholder="Qidirish...">
        <button class="call-icon">ðŸ”Ž</button>
    </div>
    <div class="user-interface">
        <img class="image"
             src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgqugyJge8XSwS5JVVpb1_BxA-w2Ue8H8Kiw&s"
             alt="User Icon">

        {% if user.is_authenticated %}
        <button class="user-btn" onclick="toggleDropdown()">{{ user.username }}</button>
        <div class="dropdown">
            <a href="#">Profil</a>
            <a href="#">Hisob ma'lumotlari</a>
            <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" class="logout-btn">Logout</button>
            </form>
        </div>
        {% else %}
        <div class="auth-buttons">
            <a href="{% url 'login' %}" class="user-btn">Login</a>
            <a href="{% url 'signup' %}" class="user-btn">Register</a>
        </div>
        {% endif %}
    </div>
</nav>

<!-- Video bo'limi -->
<div class="container-video-katta">
    <video id="intro-video" class="responsive-video" autoplay muted loop>
        <source src="{{ select_movies.video_fayl.url }}" type="video/mp4">
        Sizning brauzeringiz videoni qoâ€˜llab-quvvatlamaydi.
    </video>
    <div class="video-info">
        <div class="video-title">
            <h3>{{ select_movies.name }}</h3>
            <p class="reyting">
                {% for i in ratings %}
                {% if forloop.counter <= select_movies.reyting %}
                <i class="fa-solid fa-star" style="color: red;"></i>
                {% else %}
                <i class="fa-regular fa-star" style="color: gray;"></i>
                {% endif %}
                {% endfor %}
            </p>
            <p class="sight-age">Ko'rish yoshi: {{ select_movies.sight_age }}+</p>
        </div>
    </div>
</div>

<!-- Play Now tugmasi -->
<div class="play-now-button-container">
    <button id="play-now-btn" class="play-now-button" onclick="playNow()">Play Now</button>
</div>

<!-- Video Modal -->
<div id="video-modal" class="video-modal">
    <button class="close-modal" onclick="closeModal()">&times;</button>
    <video id="modal-video" controls>
        <source src="{{ select_movies.video_fayl.url }}" type="video/mp4">
        Sizning brauzeringiz videoni qoâ€˜llab-quvvatlamaydi.
    </video>
</div>

{% block content %}
{% endblock %}

<script>
    function toggleDropdown() {
        var dropdown = document.querySelector('.dropdown');
        dropdown.classList.toggle('active');
    }

    function playNow() {
        const modal = document.getElementById('video-modal');
        modal.style.display = 'flex';
        document.getElementById('modal-video').play();
    }

    function closeModal() {
        const modal = document.getElementById('video-modal');
        document.getElementById('modal-video').pause();
        modal.style.display = 'none';
    }
    function toggleDropdown() {
    var dropdown = document.querySelector('.dropdown');
    dropdown.classList.toggle('active');
}

function playNow() {
    const modal = document.getElementById('video-modal');
    modal.style.display = 'flex';
    document.getElementById('modal-video').play();
}

function closeModal() {
    const modal = document.getElementById('video-modal');
    document.getElementById('modal-video').pause();
    modal.style.display = 'none';
}

</script>

<script src="{% static 'js/script.js' %}"></script>
</body>
</html>
