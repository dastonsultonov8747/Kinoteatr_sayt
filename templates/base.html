<!DOCTYPE html>
{% load static %}
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <title>SXD Tube</title>

</head>
<body>
<!-- Navbar -->
<nav class="navbar">
    <div class="logo">
        <img src="https://t4.ftcdn.net/jpg/04/67/15/09/360_F_467150902_zUs6Dvp9wJLGOoQRMOqGBtXaqXAJOFTO.jpg"
             alt="SXD Logo">
        <span>DXS Tube</span>
    </div>

    <div class="home">
        <a href="{% url 'index' %}">Home</a>
    </div>

    <div class="menu">
        <ul>
            <li><a href="{% url 'multfilimlar'%}">Multfilm</a></li>
            <li><a href="{%url 'animelar'%}">Anime</a></li>
            <li><a href="{% url 'kinolar' %}">Kinolar</a></li>
            <li><a href="{% url 'seriallar'%}">Seriallar</a></li>
        </ul>
    </div>

    <div class="search-call">
        <input type="text" placeholder="Qidirish...">
        <button class="call-icon">üîé</button>
    </div>

    <div class="user-interface">
        <img class="image"
             src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgqugyJge8XSwS5JVVpb1_BxA-w2Ue8H8Kiw&s"
             alt="User Icon">
        <button class="user-btn" onclick="toggleDropdown()">User</button>
        <div class="dropdown">
            <a href="#">Profil</a>
            <a href="#">Logout</a>
            <a href="#">user@example.com</a>
        </div>
    </div>
</nav>

<!-- Video Section -->
<div class="container-video-katta">
    <video id="intro-video" class="responsive-video" autoplay muted loop>
        <source src="{{ select_movies.video_fayl.url }}" type="video/mp4">
        Sizning brauzeringiz videoni qo‚Äòllab-quvvatlamaydi.
    </video>

    <div class="video-info">
        <div class="video-title">
            <h3>{{ select_movies.name }}</h3>
            <p>{{ select_movies.description }}</p>
        </div>

    </div>

</div>

<div class="play-now-button-container">
    <button id="play-now-btn" class="play-now-button" onclick="playNow()">Play Now</button>
</div>
<!-- Sound Toggle Button -->
<div style="position: absolute; top: 90%; z-index: 10; left: 80%;">
    <button id="sound-btn" class="sound-button" onclick="toggleSound()">üîá</button>
</div>

<!-- Video Modal -->
<div id="video-modal" class="video-modal">
    <button class="close-modal" onclick="closeModal()">&times;</button>
    <video id="modal-video" controls>
        <source src="{{ select_movies.video_fayl.url }}" type="video/mp4">
        Sizning brauzeringiz videoni qo‚Äòllab-quvvatlamaydi.
    </video>

    <!-- Video Controls -->
    <div class="video-controls">
        <button onclick="rewindVideo()">‚è™ Orqaga</button>
        <button onclick="togglePlayPause()">‚èØÔ∏è Pause/Play</button>
        <button onclick="forwardVideo()">‚è© Oldinga</button>
    </div>
</div>

{% block content %}
{% endblock %}

<script>
    // Modalni ochish funksiyasi
    function openModal() {
        const modal = document.getElementById('video-modal');
        const video = document.getElementById('modal-video');
        modal.style.display = 'flex'; // Modalni ko'rsatish
        video.play();
    }

    // Modalni yopish funksiyasi
    function closeModal() {
        const modal = document.getElementById('video-modal');
        const video = document.getElementById('modal-video');
        video.pause(); // Video pauza
        modal.style.display = 'none'; // Modalni yashirish
    }

    // Video boshqaruv funksiyalari
    function togglePlayPause() {
        const video = document.getElementById('modal-video');
        if (video.paused) {
            video.play();
        } else {
            video.pause();
        }
    }

    function rewindVideo() {
        const video = document.getElementById('modal-video');
        video.currentTime -= 10; // 10 sekund orqaga
    }

    function forwardVideo() {
        const video = document.getElementById('modal-video');
        video.currentTime += 10; // 10 sekund oldinga
    }

    // Ovozni boshqarish funksiyasi
    function toggleSound() {
        const video = document.getElementById('intro-video');
        const soundBtn = document.getElementById('sound-btn');
        if (video.muted) {
            video.muted = false;
            soundBtn.textContent = 'üîä'; // Ovozni yoqish
        } else {
            video.muted = true;
            soundBtn.textContent = 'üîá'; // Ovozni o'chirish
        }
    }

    // Play Now tugmasini bosganda videoni ochish
    function playNow() {
        openModal();
    }
</script>

<script src="{% static 'js/script.js' %}"></script>
</body>
</html>
